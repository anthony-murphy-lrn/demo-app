generator client {
  provider = "prisma-client-js"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model TestSession {
  id                  String             @id @default(uuid())
  studentId           String
  learnositySessionId String
  createdAt           DateTime           @default(now())
  updatedAt           DateTime           @updatedAt
  expiresAt           DateTime?
  assessmentId        String
  results             AssessmentResult[]

  @@map("test_sessions")
}

model AssessmentResult {
  id            String      @id @default(uuid())
  testSessionId String
  response      Json
  score         Float?
  timeSpent     Int?
  createdAt     DateTime    @default(now())
  updatedAt     DateTime    @updatedAt
  testSession   TestSession @relation(fields: [testSessionId], references: [id], onDelete: Cascade)

  @@map("assessment_results")
}
